WRT docker, one thing to do is to define production stuff fully in dockerfile and development in docker-compose, keeping it separate from the dockerfile
